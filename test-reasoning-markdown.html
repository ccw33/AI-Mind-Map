<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨ç†å†…å®¹Markdownè§£ææµ‹è¯•</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }

        .test-container {
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .reasoning-content {
            background: #f8f9fa;
            border-left: 3px solid #888;
            padding: 12px;
            margin: 8px 0;
            border-radius: 0 8px 8px 0;
            font-style: italic;
            color: #666;
            font-size: 13px;
            line-height: 1.4;
        }

        .reasoning-content::before {
            content: "ğŸ¤” æ€è€ƒè¿‡ç¨‹ï¼š";
            font-weight: 600;
            color: #888;
            display: block;
            margin-bottom: 6px;
            font-style: normal;
        }

        /* æ¨ç†å†…å®¹ä¸­çš„markdownå…ƒç´ æ ·å¼ */
        .reasoning-content p {
            margin: 4px 0;
            color: #666;
            font-size: 13px;
            line-height: 1.4;
            font-style: italic;
        }

        .reasoning-content h1, .reasoning-content h2, .reasoning-content h3,
        .reasoning-content h4, .reasoning-content h5, .reasoning-content h6 {
            margin: 6px 0 4px 0;
            color: #555;
            font-size: 14px;
            font-weight: 600;
            line-height: 1.3;
            font-style: normal;
        }

        .reasoning-content ul, .reasoning-content ol {
            margin: 4px 0;
            padding-left: 16px;
            color: #666;
            font-size: 13px;
        }

        .reasoning-content li {
            margin: 2px 0;
            color: #666;
            font-size: 13px;
            line-height: 1.4;
            font-style: italic;
        }

        .reasoning-content strong {
            font-weight: 600;
            color: #555;
            font-style: normal;
        }

        .reasoning-content em {
            font-style: italic;
            color: #666;
        }

        .reasoning-content code {
            background: #e8e8e8;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 12px;
            color: #555;
            font-style: normal;
        }

        .final-answer {
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #e8e8e8;
        }

        .final-answer::before {
            content: "âœ… æœ€ç»ˆå›ç­”ï¼š";
            font-weight: 600;
            color: #409eff;
            display: block;
            margin-bottom: 6px;
        }

        button {
            background: #409eff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px 5px;
        }

        button:hover {
            background: #337ecc;
        }

        .raw-content {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 12px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>æ¨ç†å†…å®¹Markdownè§£ææµ‹è¯•</h1>

    <div class="test-container">
        <h2>æµ‹è¯•1: åŸºç¡€æ¨ç†å†…å®¹</h2>
        <button onclick="testBasicReasoning()">æµ‹è¯•åŸºç¡€æ¨ç†</button>
        <div id="test1-result"></div>
    </div>

    <div class="test-container">
        <h2>æµ‹è¯•2: å¤æ‚æ¨ç†å†…å®¹ï¼ˆåŒ…å«åˆ—è¡¨å’ŒåŠ ç²—ï¼‰</h2>
        <button onclick="testComplexReasoning()">æµ‹è¯•å¤æ‚æ¨ç†</button>
        <div id="test2-result"></div>
    </div>

    <div class="test-container">
        <h2>æµ‹è¯•3: æ¨ç†å†…å®¹ä¸æœ€ç»ˆå›ç­”</h2>
        <button onclick="testReasoningWithAnswer()">æµ‹è¯•æ¨ç†+å›ç­”</button>
        <div id="test3-result"></div>
    </div>

    <script>
        // åˆå§‹åŒ–marked.js
        if (typeof marked !== 'undefined') {
            marked.setOptions({
                breaks: true,
                gfm: true,
                sanitize: false,
                smartLists: true,
                smartypants: false
            });
        }

        // Markdownè§£æå‡½æ•°ï¼ˆä»ä¸»é¡¹ç›®å¤åˆ¶ï¼‰
        function parseMarkdown(content) {
            if (typeof content !== 'string') {
                console.warn('parseMarkdownæ¥æ”¶åˆ°éå­—ç¬¦ä¸²å†…å®¹:', typeof content, content);
                return String(content || '');
            }

            if (typeof marked === 'undefined') {
                console.warn('marked.jsæœªåŠ è½½ï¼Œä½¿ç”¨é™çº§è§£æ');
                return content.replace(/\n/g, '<br>');
            }

            try {
                let html = marked.parse(content);
                if (typeof html !== 'string') {
                    console.warn('marked.parseè¿”å›éå­—ç¬¦ä¸²:', typeof html, html);
                    return content.replace(/\n/g, '<br>');
                }
                return html;
            } catch (error) {
                console.warn('marked.jsè§£æå¤±è´¥:', error);
                return content.replace(/\n/g, '<br>');
            }
        }

        function testBasicReasoning() {
            const reasoningContent = `ç”¨æˆ·æƒ³è¦äº†è§£äººå·¥æ™ºèƒ½çš„åŸºæœ¬æ¦‚å¿µã€‚æˆ‘éœ€è¦æä¾›ä¸€ä¸ªæ¸…æ™°çš„è§£é‡Šï¼š

**åˆ†ææ€è·¯ï¼š**
1. ä»å®šä¹‰å¼€å§‹ï¼Œå»ºç«‹åŸºç¡€è®¤çŸ¥
2. è§£é‡Šæ ¸å¿ƒç‰¹å¾å’Œèƒ½åŠ›
3. æä¾›å®é™…åº”ç”¨ä¾‹å­

è¿™æ ·çš„è§£é‡Šæ–¹å¼èƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·å¿«é€Ÿç†è§£AIçš„æœ¬è´¨ã€‚`;

            const resultDiv = document.getElementById('test1-result');
            resultDiv.innerHTML = `
                <h4>åŸå§‹å†…å®¹ï¼š</h4>
                <div class="raw-content">${reasoningContent}</div>
                <h4>è§£æåçš„æ¨ç†å†…å®¹ï¼š</h4>
                <div class="reasoning-content">${parseMarkdown(reasoningContent)}</div>
            `;
        }

        function testComplexReasoning() {
            const reasoningContent = `ç”¨æˆ·è¯¢é—®**æœºå™¨å­¦ä¹ **çš„åº”ç”¨åœºæ™¯ã€‚æˆ‘éœ€è¦ä»å¤šä¸ªç»´åº¦æ¥åˆ†æï¼š

**åˆ†æç»´åº¦ï¼š**
- **æŠ€æœ¯å±‚é¢**ï¼šç®—æ³•å’Œæ¨¡å‹çš„é€‰æ‹©
- **ä¸šåŠ¡å±‚é¢**ï¼šå®é™…ä»·å€¼å’ŒROI
- **å®æ–½å±‚é¢**ï¼šæŠ€æœ¯éš¾åº¦å’Œèµ„æºéœ€æ±‚

**å…·ä½“æ­¥éª¤ï¼š**
1. è¯†åˆ«å¸¸è§çš„åº”ç”¨é¢†åŸŸ
2. åˆ†ææ¯ä¸ªé¢†åŸŸçš„ç‰¹ç‚¹
3. æä¾›å…·ä½“çš„å®æ–½å»ºè®®

**é¢„æœŸæ•ˆæœï¼š**
å¸®åŠ©ç”¨æˆ·ç†è§£æœºå™¨å­¦ä¹ åœ¨ä¸åŒåœºæ™¯ä¸‹çš„åº”ç”¨ä»·å€¼å’Œå®æ–½æ–¹æ³•ã€‚`;

            const resultDiv = document.getElementById('test2-result');
            resultDiv.innerHTML = `
                <h4>åŸå§‹å†…å®¹ï¼š</h4>
                <div class="raw-content">${reasoningContent}</div>
                <h4>è§£æåçš„æ¨ç†å†…å®¹ï¼š</h4>
                <div class="reasoning-content">${parseMarkdown(reasoningContent)}</div>
            `;
        }

        function testReasoningWithAnswer() {
            const reasoningContent = `ç”¨æˆ·æƒ³è¦äº†è§£**æ·±åº¦å­¦ä¹ **çš„æ ¸å¿ƒæ¦‚å¿µã€‚æˆ‘éœ€è¦é‡‡ç”¨å±‚æ¬¡åŒ–çš„è§£é‡Šæ–¹æ³•ï¼š

**æ•™å­¦ç­–ç•¥ï¼š**
1. **åŸºç¡€æ¦‚å¿µ**ï¼šä»ç¥ç»ç½‘ç»œå¼€å§‹
2. **æ ¸å¿ƒç‰¹å¾**ï¼šå¤šå±‚ç»“æ„å’Œè‡ªåŠ¨ç‰¹å¾æå–
3. **å®é™…åº”ç”¨**ï¼šå›¾åƒè¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰

**è§£é‡Šé‡ç‚¹ï¼š**
- ä¸ä¼ ç»Ÿæœºå™¨å­¦ä¹ çš„**åŒºåˆ«**
- **ä¼˜åŠ¿**å’Œ**å±€é™æ€§**
- å­¦ä¹ **è·¯å¾„**å’Œ**èµ„æºæ¨è**`;

            const finalAnswer = `## æ·±åº¦å­¦ä¹ æ ¸å¿ƒæ¦‚å¿µè§£æ

### ğŸ§  åŸºæœ¬å®šä¹‰
**æ·±åº¦å­¦ä¹ **æ˜¯æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œä½¿ç”¨å¤šå±‚ç¥ç»ç½‘ç»œæ¥æ¨¡æ‹Ÿäººè„‘çš„å­¦ä¹ è¿‡ç¨‹ã€‚

### ğŸ”‘ æ ¸å¿ƒç‰¹å¾
- **å¤šå±‚ç»“æ„**ï¼šåŒ…å«å¤šä¸ªéšè—å±‚çš„ç¥ç»ç½‘ç»œ
- **è‡ªåŠ¨ç‰¹å¾æå–**ï¼šæ— éœ€æ‰‹åŠ¨è®¾è®¡ç‰¹å¾
- **ç«¯åˆ°ç«¯å­¦ä¹ **ï¼šä»åŸå§‹æ•°æ®ç›´æ¥å­¦ä¹ åˆ°æœ€ç»ˆè¾“å‡º

### ğŸš€ ä¸»è¦åº”ç”¨
- å›¾åƒè¯†åˆ«å’Œè®¡ç®—æœºè§†è§‰
- è‡ªç„¶è¯­è¨€å¤„ç†å’Œæœºå™¨ç¿»è¯‘
- è¯­éŸ³è¯†åˆ«å’Œåˆæˆ`;

            const resultDiv = document.getElementById('test3-result');
            resultDiv.innerHTML = `
                <h4>æ¨ç†è¿‡ç¨‹ï¼š</h4>
                <div class="reasoning-content">${parseMarkdown(reasoningContent)}</div>
                <h4>æœ€ç»ˆå›ç­”ï¼š</h4>
                <div class="final-answer">${parseMarkdown(finalAnswer)}</div>
            `;
        }
    </script>
</body>
</html>
